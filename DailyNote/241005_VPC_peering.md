# AWS VPC 및 연결방법 조사
---
## bastion 인스턴스 별도 VPC로 분리 여부 조사
- 프로젝트 성격 및 요구사항에 상이하다.VPC 분리/통일 둘 다 가능하다.
	- 분리할 경우 장단점
		- 장점
			- 보안 강화
				- 보안 경계 명확 가능
				- 클러스터 트래픽과 관리작업 트래픽을 분리하여 네트워크 성능 및 보안 강화 가능
		- 단점
			- 복잡성 : 구성이 복잡
			- 비용 : VPC peering, Transitgateway 사용으로 인한 복잡성 증가 가능
			- 지연시간 증가 : VPC 간 통신으로 지연시간 발생 가능
	- 통일할 경우 장단점
		- 장점
			- 단순성 : 구성이 간단
			- 비용 효율성 : 추가적인 VPC 연결 비용 발생 X
			- 낮은 지연시간 : 동일 VPC 내 통신으로 지연시간 최소화
		- 단점
			- 보안 복잡성 : 단일 VPC 내에서 세분화된 보안그룹과 NACL 설정이 필요
			- 보안 저하 : bastion 인스턴스 침해 시, cluster 관리 권한을 얻을 가능성이 높아진다.
		- 보안과 격리가 최우선일 경우 : VPC 분리 (대규모 || 엄격한 규제 요구사항)
		- 구성의 단순성과 비용효율성이 중요 : VPC 통일 (소규모 || 개발/테스트 환경)
	- ==금융 도메인과 보안을 고려했을 때, 분리하는 것이 옳다고 판단된다.==

## VPC 간 연결방법
- VPC peering
	- 주의사항
		- IP 주소 범위
			- 두 VPC에 할당된 IP CIDR는 동일하거나 겹치면 안된다.
		- 연결 수 제한
			- VPC에는 Peering 연결 수 한도가 존재한다 => 기본 50개
		- 전이적 Peering 불가
			- peering 구성이 VPC A-B, B-C 이렇게 돼있더라도, A-C 간 직접 통신을 불가능하다.
		- 라우팅 제한
			- peering을 구성하더라도
			  상대방 VPC에 구성된 인터넷 게이트웨이, NAT게이트웨이뿐만 아니라 VPN, Direct Connec로 연결되는 온프레미스와 통신 되지 않는다.
			  => 상대방 VPC에 구성된 추가적인 네트워크 자원들을 사용할 수 없다.
		- 보안그룹, 네트워크 ACL
			- 보안그룹 및 NACL을 적절히 구성하여 VPC 간 트래픽을 허용시켜야 한다.
		- 라우팅 테이블
			- peering 구성 후, 수동으로 각 VPC의 라우팅 테이블을 업데이트하여 VPC간 트래픽을 허용해야한다.
- Transit gateway
